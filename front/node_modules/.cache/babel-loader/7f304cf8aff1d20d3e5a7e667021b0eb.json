{"ast":null,"code":"var _jsxFileName = \"/Users/fadimoughaizel/Desktop/Portfolio/Forum/forum/src/Pages/LoginPage.js\";\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nexport default function LoginPage() {\n  var TokenStrategy = require('passport-accesstoken').Strategy;\n\n  var strategyOptions = {\n    tokenHeader: 'x-custom-token',\n    tokenField: 'custom-token'\n  };\n  passport.use(new TokenStrategy(strategyOptions, function (token, done) {\n    User.findOne({\n      token: token\n    }, function (err, user) {\n      if (err) {\n        return done(err);\n      }\n\n      if (!user) {\n        return done(null, false);\n      }\n\n      if (!user.verifyToken(token)) {\n        return done(null, false);\n      }\n\n      return done(null, user);\n    });\n  }));\n  const [usernameField, setUsername] = useState('');\n  const [passwordField, setPassword] = useState('');\n  var usernameCorrect = true;\n  var passwordCorrect = true;\n\n  const submit = () => {\n    fetch(\"http://localhost:5000/login/login\", {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      method: 'POST',\n      body: JSON.stringify({\n        username: usernameField,\n        password: passwordField\n      })\n    }).then(response => response.json()).then(username => {\n      if (usernameField !== username) {\n        usernameCorrect = false;\n      } else {\n        usernameCorrect = true;\n      }\n    }).then(password => {\n      if (passwordField !== password) {\n        passwordCorrect = false;\n      } else {\n        passwordCorrect = true;\n      }\n\n      alert('Response sent !');\n    }).catch(error => console.log('error', error));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, !usernameCorrect && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, \"Wrong username\"), !passwordCorrect && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, \"Wrong password\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    onChange: e => setUsername(e.target.value),\n    required: true,\n    id: \"outlined-required\",\n    label: \"Username\",\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    onChange: e => setPassword(e.target.value),\n    required: true,\n    id: \"outlined-password-input\",\n    label: \"Password\",\n    type: \"password\",\n    autoComplete: \"current-password\",\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: submit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/homepage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 32\n    }\n  }, \"Login\"))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }\n  }, \"Sign up\")))));\n}","map":{"version":3,"sources":["/Users/fadimoughaizel/Desktop/Portfolio/Forum/forum/src/Pages/LoginPage.js"],"names":["React","useState","Link","Button","TextField","LoginPage","TokenStrategy","require","Strategy","strategyOptions","tokenHeader","tokenField","passport","use","token","done","User","findOne","err","user","verifyToken","usernameField","setUsername","passwordField","setPassword","usernameCorrect","passwordCorrect","submit","fetch","headers","method","body","JSON","stringify","username","password","then","response","json","alert","catch","error","console","log","e","target","value"],"mappings":"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","sourcesContent":["import React, {useState} from 'react'\nimport {Link} from 'react-router-dom'\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function LoginPage() {\n  \n  var TokenStrategy   = require('passport-accesstoken').Strategy;\n  var strategyOptions = {\n      tokenHeader:    'x-custom-token',        \n      tokenField:     'custom-token'\n  };\n  \n  passport.use(new TokenStrategy(strategyOptions,\n      function (token, done) {\n          User.findOne({token: token}, function (err, user) {\n              if (err) {\n                  return done(err);\n              }\n  \n              if (!user) {\n                  return done(null, false);\n              }\n  \n              if (!user.verifyToken(token)) {\n                  return done(null, false);\n              }\n  \n              return done(null, user);\n          });\n      } ))\n  \n  const [usernameField, setUsername] = useState('')\n  const [passwordField, setPassword] = useState('')\n\n  var usernameCorrect = true\n  var passwordCorrect = true\n\n  const submit = () => {\n    fetch(\"http://localhost:5000/login/login\", {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      method: 'POST',\n      body: JSON.stringify({\n        username: usernameField,\n        password: passwordField\n      }),\n    })\n    .then(response => response.json())\n    .then(username => { if(usernameField !== username) {\n          usernameCorrect = false\n    } else {\n      usernameCorrect = true\n    }\n  })\n    .then(password => { if(passwordField !== password) {\n          passwordCorrect = false\n    } else {\n      passwordCorrect = true\n    }\n    alert('Response sent !')\n  })\n    .catch(error => console.log('error', error));\n  }\n\n  return (\n  <div>\n    <center>\n        {!usernameCorrect &&\n        <div>\n          Wrong username\n        </div>}\n        {!passwordCorrect &&\n        <div>\n          Wrong password\n        </div>}\n      <div>\n      <TextField\n                onChange={(e) => setUsername(e.target.value)}\n                required\n                id=\"outlined-required\"\n                label=\"Username\"\n                variant=\"outlined\"\n              />\n      </div>\n      <div>\n      <TextField\n                onChange={(e) => setPassword(e.target.value)}\n                required\n                id=\"outlined-password-input\"\n                label=\"Password\"\n                type=\"password\"\n                autoComplete=\"current-password\"\n                variant=\"outlined\"\n      />\n      </div>\n      <div>\n      <Button onClick={submit}><Link to= '/homepage'>Login</Link></Button>\n      </div>\n      <div>\n      <Button><Link to= '/signup'>Sign up</Link></Button>\n      </div>\n    </center>\n  </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}